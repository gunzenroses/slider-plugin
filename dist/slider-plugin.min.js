!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("jQuery"));else if("function"==typeof define&&define.amd)define(["jQuery"],e);else{var i="object"==typeof exports?e(require("jQuery")):e(t.jQuery);for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(self,(function(t){return(()=>{"use strict";var e={145:e=>{e.exports=t}},i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var a=i[t]={exports:{}};return e[t](a,a.exports,s),a.exports}var n={};return(()=>{const t={min:0,max:100,range:!0,currentFirst:33,currentSecond:65,step:1,orientation:"horizontal",tooltip:!0,scale:{stepPerDiv:10}};class e{constructor(){this.listeners=[]}add(t){this.listeners.push(t)}remove(t){const e=this.listeners.indexOf(t);this.listeners.splice(e,1)}get(){return this.listeners}notify(t){this.listeners.forEach((e=>e(t)))}}function i(t,e,i){const s=document.createElement(`${t}`);return s.classList.add(e),i.append(s),s}function n(t,e){const{max:i,min:s,step:n}=e;if(t-s<=0)return s;if(t>=i)return i;const a=100*(t-s)/(100*n),r=((t-s)%n>n/2?Math.ceil(a):Math.floor(a))*n+s;return r>=i?i:r}function a(t,e){const{max:i,min:s}=e;return parseFloat(((t-s)/(i-s)*100).toFixed(2))}function r(t,e,i){return e?t.style.left?parseInt(t.style.left.replace("%","")):parseInt(getComputedStyle(t).left.replace("px",""))/i*100:t.style.bottom?parseInt(t.style.bottom.replace("%","")):parseInt(getComputedStyle(t).bottom.replace("px",""))/i*100}function h(t,e){const{max:i,min:s}=e;return(Math.round(t*(i-s)/100)+s).toString()}class o{constructor(t){this.fromModelChangeView=new e,this.fromModelUpdateData=new e,this.data=t,this.updateCurrentsWithStep()}updateCurrentsWithStep(){this.data.currentFirst=n(this.data.currentFirst,this.data),this.data.currentSecond=this.data.range?n(this.data.currentSecond,this.data):this.data.max}getData(){return this.data}setData(t,e){this.updateData(t,e),this.updateCurrentsWithStep(),this.changeData(t)}updateData(t,e){const i=this.getData();if(i[t]===e)return;e=function(t,e,i){const{max:s,min:a,step:r,currentFirst:h,currentSecond:o}=i,l=e;switch(t){case"step":e=function(t){return t<0?1:t>s-a?s-a:t<s-a?t:t===s-a?s-a:1}(parseInt(l));break;case"min":e=function(t){return t<0?0:t<=s-r?t:0}(parseInt(l));break;case"max":e=function(t){return t<0?a+r:t>=a+r?t:a+r}(parseInt(l));break;case"currentFirst":e=function(t){return t<a?a:t>o?o:t<=o?n(t,i):a}(parseInt(l));break;case"currentSecond":e=function(t){return t<h?h:t>s?s:t<=s?n(t,i):h}(parseInt(l));break;default:e=l}return e}(t,e,i);const s={[t]:e};this.data=Object.assign(Object.assign({},i),s)}changeData(t){"currentFirst"===t?this.fromModelChangeView.notify(this.data.currentFirst):"currentSecond"===t?this.fromModelChangeView.notify(this.data.currentSecond):this.fromModelUpdateData.notify()}}class l{constructor(t,e){this.init(t,e)}init(t,e){const i=t.settings.ifHorizontal?"slider__content":"slider__content_vertical";return this.sliderContainer=document.createElement("div"),this.sliderContainer.classList.add(i),e.append(this.sliderContainer),this.sliderContainer}}class d{constructor(t){this.init(t)}init(t){return this.make(t),this.change(t),t.track.append(this.element),this.element}make(t){this.element=document.createElement("div");const e=t.settings.ifHorizontal?"slider__range":"slider__range_vertical";return this.element.classList.add(`${e}`),this.element}change(t){return t.settings.range?(this.changeFirst(t),this.changeSecond(t)):this.changeFirst(t),this.element}changeFirst(t){t.settings.range?t.settings.ifHorizontal?this.element.style.left=t.settings.firstPosition+"%":this.element.style.bottom=t.settings.firstPosition+"%":t.settings.ifHorizontal?this.element.style.right=100-t.settings.firstPosition+"%":this.element.style.top=100-t.settings.firstPosition+"%"}changeSecond(t){t.settings.ifHorizontal?this.element.style.right=100-t.settings.secondPosition+"%":this.element.style.top=100-t.settings.secondPosition+"%"}}class c{constructor(t){this.init(t)}init(t){const e=t.settings.ifHorizontal?"slider__track":"slider__track_vertical";return this.element=document.createElement("div"),this.element.classList.add(e),t.sliderContainer.append(this.element),this.element}}class m{constructor(t,e){this.className=e,this.init(t)}init(t){return this.make(t),this.change(t),t.track.append(this.element),this.element}make(t){this.element=document.createElement("div");const e=t.settings.ifHorizontal?this.className:`${this.className}-vertical`;return("thumb_first"===this.className||t.settings.range?["slider__thumb",e]:["slider__thumb",e,"disabled"]).forEach((t=>{this.element.classList.add(t)})),this.element}change(t){const e="thumb_first"===this.className?t.settings.firstPosition:t.settings.secondPosition;return t.settings.ifHorizontal?this.element.style.left=e+"%":this.element.style.bottom=e+"%",this.element}}class u{constructor(t){this.init(t)}init(t){return this.make(t),this.change(t),this.element.append(this.scaleItems),t.sliderContainer.append(this.element),this.element}make(t){const e=t.settings.ifHorizontal?"slider__scale":"slider__scale_vertical",i=t.settings.scale?[e]:[e,"disabled"];return this.element=document.createElement("div"),this.element.dataset.name="scale",i.forEach((t=>{this.element.classList.add(t)})),this.element}change(t){return this.countContainerSize(t),this.makeScaleRow(t),this.makeScaleContainer(t),this.makeElementClasses(t),this.scaleItems.innerHTML=this.makeScaleItems(t)+this.makeMaxItem(t),this.element}countContainerSize(t){const e=getComputedStyle(t.sliderContainer);this.scaleLength=t.settings.ifHorizontal?Math.ceil(parseFloat(e.width)):Math.ceil(parseFloat(e.height))}makeScaleRow(t){this.scaleItemRow=[];let e=t.settings.min;for(;e<t.settings.max;)this.scaleItemRow.push(e),e+=t.settings.step}makeScaleContainer(t){const e=t.settings.max-this.scaleItemRow[this.scaleItemRow.length-1],i=this.scaleLength-function(t,e,i){const{max:s,min:n}=e;return t*(i/(s-n))}(e,t.settings,this.scaleLength)-1;this.tailContainer=Math.floor(this.scaleLength-i);const s=t.settings.ifHorizontal?"scale__row":"scale__row_vertical";this.scaleItems=document.createElement("div"),this.scaleItems.classList.add(s),t.settings.ifHorizontal?this.scaleItems.style.width=i+"px":this.scaleItems.style.height=i+"px"}makeElementClasses(t){this.segmentClass=t.settings.ifHorizontal?"scale__segment":"scale__segment_vertical",this.spanClass=t.settings.ifHorizontal?"scale__number":"scale__number_vertical"}makeScaleItems(t){return this.itemWidth=Math.round(this.scaleLength/this.scaleItemRow.length),this.stepPerDivValue=t.settings.stepPerDiv?t.settings.stepPerDiv:1,this.maxItem=this.scaleItemRow[this.scaleItemRow.length-1],this.scaleItemRow.map(((e,i)=>this.createScaleItem({item:e,index:i,that:t}))).join(" ")}createScaleItem(t){const{item:e,index:i,that:s}=t,n=s.settings.ifHorizontal?"scale__point":"scale__point_vertical",a=e===this.maxItem&&this.tailContainer<30?'style= "visibility: hidden;"':"";if(this.itemWidth>40)return`<div class=${this.segmentClass}><span class="${this.spanClass}" ${a}>${e}</span></div>`;{const t=Math.floor(50/this.itemWidth);let r;return r=this.stepPerDivValue<=t||this.stepPerDivValue%t==0?t:function(t,e){const i=t;let s=e>1?e:1;if(i<=s)return s;for(;i%s!=0;)s++;return s}(this.stepPerDivValue,t),e===s.settings.min||(e-s.settings.min)%(this.stepPerDivValue*s.settings.step)==0&&i%r==0&&i%this.stepPerDivValue==0?`<div class=${this.segmentClass}><span class="${this.spanClass}" ${a}>${e}</span></div>`:`<div class=${n}></div>`}}makeMaxItem(t){const e=`position: absolute; ${t.settings.ifHorizontal?"right":"top"}: 0;`;return`<div class=${this.segmentClass} style="${e}""><span class="${this.spanClass}">${t.settings.max}</span></div>`}}class p{constructor(t,e){this.className=e,this.init(t)}init(t){return this.createChildren(t),this.make(t),this.change(t),this.append(),this.element}createChildren(t){this.parentNode="tooltip_first"===this.className?t.thumb.element:t.thumbSecond.element}make(t){const e=t.settings.ifHorizontal?"tooltip_horizontal":"tooltip_vertical",i=t.settings.tooltip?[this.className,e]:[this.className,e,"disabled"];return this.element=document.createElement("span"),i.forEach((t=>{this.element.classList.add(t)})),this.element.dataset.name="tooltip",this.element}change(t){const e="tooltip_first"===this.className?t.settings.firstPosition:t.settings.secondPosition;return this.element.innerText=h(e,t.settings),this.element}append(){this.parentNode.append(this.element)}}class g{constructor(t){this.fromViewSelectThumb=new e,this.fromViewDragThumb=new e,this.parentContainer=t}init(t){this.createSettings(t),this.render(),this.setupHandlers(),this.enable()}createSettings(t){this.settings=t,this.settings.firstPosition=a(t.currentFirst,t),this.settings.secondPosition=a(t.currentSecond,t),this.settings.stepPerDiv=this.settings.scale.stepPerDiv,this.settings.ifHorizontal="horizontal"===this.settings.orientation}setupHandlers(){this.selectThumbHandler=this.selectThumb.bind(this),this.dragThumbHandler=this.dragThumbStart.bind(this),this.moveThumbHandler=this.dragThumbMove.bind(this),this.dropThumbHandler=this.dragThumbEnd.bind(this)}enable(){this.sliderContainer.addEventListener("pointerup",this.selectThumbHandler),this.addListenerPointerDown()}addListenerPointerDown(){this.settings.range?(this.thumb.element.addEventListener("pointerdown",this.dragThumbHandler),this.thumbSecond.element.addEventListener("pointerdown",this.dragThumbHandler)):this.thumb.element.addEventListener("pointerdown",this.dragThumbHandler)}stopListenDown(){!0===this.settings.range?(this.thumb.element.removeEventListener("pointerdown",this.dragThumbHandler),this.thumbSecond.element.removeEventListener("pointerdown",this.dragThumbHandler)):this.thumb.element.removeEventListener("pointerdown",this.dragThumbHandler)}listenMoveAndUp(){this.sliderContainer.removeEventListener("pointerup",this.selectThumbHandler),document.addEventListener("pointermove",this.moveThumbHandler),document.addEventListener("pointerup",this.dropThumbHandler)}removeListenerMoveAndUp(){this.sliderContainer.addEventListener("pointerup",this.selectThumbHandler),document.removeEventListener("pointermove",this.moveThumbHandler),document.removeEventListener("pointerup",this.dropThumbHandler)}selectThumb(t){t.target!==this.thumb.element&&t.target!==this.thumbSecond.element&&this.fromViewSelectThumb.notify(t)}dragThumbStart(t){this.dragObj=t.target,t.preventDefault(),this.listenMoveAndUp()}dragThumbMove(t){this.stopListenDown(),t.preventDefault(),this.fromViewDragThumb.notify(t)}dragThumbEnd(){this.dragObj.style.zIndex="3",this.removeListenerMoveAndUp(),this.addListenerPointerDown()}change(t,e){t===this.thumb.element?this.settings.firstPosition=e:this.settings.secondPosition=e,this.updateElements()}updateElements(){this.range.change(this),this.settings.range?this.renderDouble():this.renderSingle()}renderSingle(){this.thumb.change(this),this.tooltipFirst.change(this)}renderDouble(){this.thumb.change(this),this.thumbSecond.change(this),this.tooltipFirst.change(this),this.tooltipSecond.change(this)}render(){this.parentContainer.innerHTML="",this.sliderContainer=new l(this,this.parentContainer).sliderContainer,this.track=new c(this).element,this.scale=new u(this).element,this.range=new d(this),this.thumb=new m(this,"thumb_first"),this.thumbSecond=new m(this,"thumb_second"),this.tooltipFirst=new p(this,"tooltip_first"),this.tooltipSecond=new p(this,"tooltip_second"),this.updateElements()}}class b{constructor(t,i){this.model=new o(i),this.view=new g(t),this.fromPresenterUpdate=new e,this.fromPresenterThumbUpdate=new e,this.fromPresenterThumbSecondUpdate=new e,this.init()}init(){this.updateView(),this.setupHandlers(),this.enable()}updateView(){this.data=this.model.getData(),this.view.init(this.data),this.createChildren()}createChildren(){this.ifHorizontal="horizontal"===this.data.orientation,this.containerSize=this.ifHorizontal?parseInt(getComputedStyle(this.view.sliderContainer).width.replace("px","")):parseInt(getComputedStyle(this.view.sliderContainer).height.replace("px","")),this.thumbWidth=parseInt(getComputedStyle(this.view.thumb.element).width.replace("px",""))}setupHandlers(){this.fromViewSelectThumbHandler=this.selectThumb.bind(this),this.fromViewDragThumbHandler=this.dragThumb.bind(this),this.fromModelChangeViewHandler=this.updateThumbs.bind(this),this.fromModelUpdateDataHandler=this.updateData.bind(this)}enable(){this.view.fromViewSelectThumb.add(this.fromViewSelectThumbHandler),this.view.fromViewDragThumb.add(this.fromViewDragThumbHandler),this.model.fromModelChangeView.add(this.fromModelChangeViewHandler),this.model.fromModelUpdateData.add(this.fromModelUpdateDataHandler)}setObject(t){this.changingObject=t,t.style.zIndex="4"}selectThumb(t){const e=this.countPosition(t);this.data.range?this.selectRangeTrue(e):this.selectThumbRangeFalse(e)}countPosition(t){const e=this.ifHorizontal?t.clientX-this.view.sliderContainer.getBoundingClientRect().left+this.thumbWidth/2:t.clientY-this.view.sliderContainer.getBoundingClientRect().top;return(i=this.ifHorizontal?Math.floor(e/this.containerSize*100):Math.floor((this.containerSize-e)/this.containerSize*100))>100?100:i<0?0:i;var i}selectThumbRangeFalse(t){this.modelThumbFirst(t)}selectRangeTrue(t){const{firstThumbPercent:e,secondThumbPercent:i}=this.countPercents(),s=Math.abs(e-t),n=Math.abs(i-t);s<n&&t<i&&this.modelThumbFirst(t),s>n&&t>e&&this.modelThumbSecond(t),s===n&&this.findClosestThumb(t,e)}countPercents(){return{firstThumbPercent:r(this.view.thumb.element,this.ifHorizontal,this.containerSize),secondThumbPercent:r(this.view.thumbSecond.element,this.ifHorizontal,this.containerSize)}}findClosestThumb(t,e){t<e?this.modelThumbFirst(t):this.modelThumbSecond(t)}dragThumb(t){const e=this.countPosition(t);this.data.range?this.dragThumbRangeTrue(e):this.dragThumbRangeFalse(e)}dragThumbRangeFalse(t){this.modelThumbFirst(t)}dragThumbRangeTrue(t){const{firstThumbPercent:e,secondThumbPercent:i}=this.countPercents();this.view.dragObj.classList===this.view.thumb.element.classList&&t<=i-1?this.modelThumbFirst(t):this.view.dragObj.classList===this.view.thumbSecond.element.classList&&t>=e+1&&this.modelThumbSecond(t)}modelThumbFirst(t){this.setObject(this.view.thumb.element);const e=h(t,this.data);this.model.setData("currentFirst",e)}modelThumbSecond(t){this.setObject(this.view.thumbSecond.element);const e=h(t,this.data);this.model.setData("currentSecond",e)}modelData(t,e){this.model.setData(t,e)}updateData(){this.updateView(),this.fromPresenterUpdate.notify()}updateThumbs(t){this.changingObject===this.view.thumb.element?this.fromPresenterThumbUpdate.notify(t.toString()):this.fromPresenterThumbSecondUpdate.notify(t.toString());const e=function(t,e){const i=a(t,e),s=function(t){const{max:e,min:i,step:s}=t;return parseFloat((s/(e-i)*100).toFixed(2))}(e),n=function(t,e){const i=100*t/(100*e),s=t%e>=e/2?Math.ceil(i):Math.floor(i);return 100===t?t:parseFloat((s*e).toFixed(2))}(i,s);return n}(t,this.data);this.view.change(this.changingObject,e)}}class f{constructor(t,e){this.item=t,this.parentContainer=e,this.messageContainer=i("div","error-message",this.parentContainer),this.invalidities=[],this.checkValidity()}checkValidity(){const t=this.item.validity;if(""===this.item.value&&this.addInvalidity("Should be a number"),t.rangeOverflow){const t=this.item.getAttribute("max");this.addInvalidity("Number should be maximum "+t)}if(t.rangeUnderflow){const t=this.item.getAttribute("min");this.addInvalidity("Number should be minimum "+t)}if(t.stepMismatch){const t=this.item.getAttribute("step"),e=parseInt(this.item.getAttribute("min"));e<1?this.addInvalidity(`Number should be multiple of ${t}`):this.addInvalidity(`Number should be: ${e} + multiple of ${t}`)}!1===this.item.checkValidity()&&this.placeValidityMessages()}addInvalidity(t){this.invalidities.push(t)}getInvalidities(){return this.invalidities.join(". \n")}placeValidityMessages(){const t=this.getInvalidities();this.messageContainer.classList.remove("hidden"),this.messageContainer.innerText=t,setTimeout((()=>{this.deleteValidityMessage()}),1500)}deleteValidityMessage(){this.invalidities=[],this.messageContainer.innerText="",this.messageContainer.classList.add("hidden")}}class v{constructor(t,e){this.panelContainer=function(t,e,i){const s=document.createElement("div");return s.classList.add("panel"),i.after(s),s}(0,0,t),this.panelItems=i("div","panel__items",this.panelContainer),this.presenter=e,this.init(),this.updatePanel()}init(){this.assignData(),this.render(this.data),this.createChildren(),this.setupHandlers(),this.enable()}assignData(){this.data=this.presenter.data}createChildren(){this.minInput=this.panelContainer.querySelector('input[name="min"]'),this.maxInput=this.panelContainer.querySelector('input[name="max"]'),this.stepInput=this.panelContainer.querySelector('input[name="step"]'),this.currentFirstInput=this.panelContainer.querySelector('input[name="currentFirst"]'),this.currentSecondInput=this.panelContainer.querySelector('input[name="currentSecond"]'),this.data.range?this.currentSecondInput.disabled=!1:this.currentSecondInput.disabled=!0}setupHandlers(){this.changePanelHandler=this.changePanel.bind(this),this.updateHandler=this.updatePanel.bind(this),this.updateThumbHandler=this.updateThumb.bind(this),this.updateThumbSecondHandler=this.updateThumbSecond.bind(this)}enable(){this.panelItems.addEventListener("change",this.changePanelHandler),this.presenter.fromPresenterUpdate.add(this.updateHandler),this.presenter.fromPresenterThumbUpdate.add(this.updateThumbHandler),this.presenter.fromPresenterThumbSecondUpdate.add(this.updateThumbSecondHandler)}updatePanel(){this.assignData(),this.updateMin(),this.updateMax(),this.updateStep(),this.updateThumb(),this.updateThumbSecond()}updateThumb(t){t?(this.currentFirstInput.value=t,this.data.currentFirst=parseInt(t),this.currentSecondInput.min=t):this.currentFirstInput.value=this.data.currentFirst,this.currentFirstInput.min=this.data.min,this.currentFirstInput.max=this.data.currentSecond,this.currentFirstInput.step=this.data.step}updateThumbSecond(t){t?(this.currentSecondInput.value=t,this.data.currentSecond=t,this.currentFirstInput.max=t):this.currentSecondInput.value=this.data.currentSecond,this.currentSecondInput.min=this.data.currentFirst,this.currentSecondInput.max=this.data.max,this.currentSecondInput.step=this.data.step,this.data.range?this.currentSecondInput.disabled=!1:(this.currentSecondInput.disabled=!0,this.currentSecondInput.value=this.data.max)}updateStep(){this.stepInput.value=this.data.step.toString(),this.stepInput.min="1",this.stepInput.max=(this.data.max-this.data.min).toString()}updateMin(){this.minInput.value=this.data.min.toString(),this.minInput.min="0",this.minInput.max=this.data.max.toString()}updateMax(){this.maxInput.value=this.data.max.toString(),this.maxInput.min=(this.data.min+this.data.step).toString()}changePanel(t){const e=t.target,i=e.getAttribute("name"),s=e.getAttribute("type"),n="checkbox"===s?e.checked:e.value;"number"===s&&new f(e,this.panelContainer),this.assignChangingObject(i),this.modelData(s,i,n)}assignChangingObject(t){this.presenter.changingObject="currentFirst"===t?this.presenter.view.thumb.element:"currentSecond"===t?this.presenter.view.thumbSecond.element:null}modelData(t,e,i){"number"===t?setTimeout((()=>{this.presenter.modelData(e,i)})):this.presenter.modelData(e,i)}render(t){this.listOfPanelItems=[{name:"min",text:"min",value:t.min,type:"number"},{name:"max",text:"max",value:t.max,type:"number"},{name:"step",text:"step",value:t.step,type:"number"},{name:"currentFirst",text:"from",value:t.currentFirst,type:"number"},{name:"currentSecond",text:"to",value:t.currentSecond,type:"number"},{name:"orientation",text:"orient",value:t.orientation,type:"select",options:["horizontal","vertical"]},{name:"range",text:"range",value:t.range?"checked":"",type:"checkbox"},{name:"scale",text:"scale",value:t.scale?"checked":"",type:"checkbox"},{name:"tooltip",text:"tooltip",value:t.tooltip?"checked":"",type:"checkbox"}],this.panelItems.innerHTML="";for(const t of this.listOfPanelItems)this.panelItems.innerHTML+=this.createPanelItem(t)}createPanelItem(t){return`<div class= "panel__item">${this.panelItemName(t.text)} ${this.panelItemInput(t)}</div>`}panelItemName(t){return`<div class= "panel__name">${t}</div>`}panelItemInput(t){const e=t.options;return"number"===t.type?`<input class="panel__input" name= ${t.name} type= ${t.type} value= ${t.value} required/>`:"checkbox"===t.type?`<input class="panel__input" name= ${t.name} type= ${t.type} ${t.value}/>`:"select"===t.type?`<${t.type} class="panel__input" name= ${t.name}> \n            ${e.map((t=>this.selectOptions(t))).join("")} \n        </${t.type}>`:""}selectOptions(t){return t===this.data.orientation?`<option selected value="${t}">${t}</option> `:`<option value="${t}">${t}</option> `}}class S{constructor(e,i,s){const n=Object.assign(Object.assign({},t),i);return this.presenter=new b(e,n),this.panel=s?new v(e,this.presenter):null,this}}s(145).fn.sliderMaker=function(t,e){return new S(this.get(0),t,e)}})(),n.default})()}));